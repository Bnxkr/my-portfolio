<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin — Edit portfolio-data.json</title>
  <style>
    body{font-family:Inter,system-ui;padding:18px;background:#f4f7fb}
    .wrap{max-width:980px;margin:0 auto}
    textarea{width:100%;height:560px;font-family:monospace;font-size:13px;padding:12px;border-radius:8px;border:1px solid #d6dce6}
    button{padding:10px 14px;border-radius:8px;border:none;background:#2d9bf0;color:#fff;font-weight:700;cursor:pointer;margin-right:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Edit portfolio-data.json</h1>
    <p>Load, edit, then download and commit to GitHub.</p>
    <textarea id="jsonArea"></textarea>
    <div style="margin-top:12px">
      <button onclick="loadJSON()">Load JSON</button>
      <button onclick="downloadJSON()">Download JSON</button>
      <button onclick="copyToClipboard()">Copy to Clipboard</button>
    </div>
  </div>
<script>
  async function loadJSON(){
    try {
      const r = await fetch('portfolio-data.json',{cache:'no-store'});
      if(!r.ok) throw new Error('portfolio-data.json not found');
      document.getElementById('jsonArea').value = await r.text();
    } catch(e){ alert('Load failed: '+e.message) }
  }
  function downloadJSON(){
    const data = document.getElementById('jsonArea').value;
    try { JSON.parse(data) } catch(e){ if(!confirm('JSON invalid — download anyway?')) return; }
    const blob = new Blob([data],{type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href=url; a.download='portfolio-data.json'; a.click(); URL.revokeObjectURL(url);
  }
  function copyToClipboard(){ navigator.clipboard.writeText(document.getElementById('jsonArea').value).then(()=>alert('Copied')) }
  loadJSON();
</script>
</body>
</html>
